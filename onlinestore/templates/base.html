{% load static %}

<!doctype html>
<html lang="en">

<head>

  {% block meta %}
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  {% endblock %}

  {% block extra_meta %}
  {% endblock %}

  {% block corecss %}
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="{% static 'css/base.css' %}">
  {% endblock %}

  {% block extra_css %}
  {% endblock %}

  {% block corejs %}
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
  </script>
  <script type="text/javascript" src="{% static 'scripts/scripts.js' %}"></script>
  </script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
  </script>
  <script src="https://kit.fontawesome.com/bdd19e9f82.js" crossorigin="anonymous"></script>
  {% endblock %}

  {% block extra_js %}
  {% endblock %}

</head>

<body>
  <nav class="navbar navbar-expand-lg nav-bg">
    <a class="navbar-brand title-txt" href="{% url 'home' %}">Frooite <i class="fa-solid fa-lemon"></i></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"><i class="fa-solid fa-bars"></i></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        {% if request.user.is_authenticated %}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle medium-txt" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            My Account
          </a>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <span class="ml-4">Hello {{request.user}}</span>
            <a class="dropdown-item" href="{% url 'store:add_listing' %}">Sell</a>
            <a class="dropdown-item" href="{% url 'store:get_sellers_listings' %}">My Store</a>
            <a class="dropdown-item" href="{% url 'store:get_favourite' %}">Saved products</a>
            <a class="dropdown-item" href="#">View/ manage orders</a>
            <a class="dropdown-item" href="{% url 'user_profiles:profile_view' %}">Manage Account</a>
            <a class="dropdown-item" href="{% url 'account_logout' %}">Sign out</a>
          </div>
        </li>
        <form class="d-flex d-sm-block d-md-none" method="GET" action="{% url 'store:search_results'%}">
          <input class="form-control me-2" type="search" name="searched" placeholder="Search"
            aria-label="search">
          <button class="btn search-button" type="submit">Search</button>
        </form>
        <li class="nav-item dropdown d-sm-block d-md-none">
          <a class="nav-link dropdown-toggle medium-txt" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Search by catagory
          </a>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a  class="dropdown-item" href="{% url 'store:all_listings' %}">All</a>
            <a  class="dropdown-item" href="{% url 'store:catagory' cat='homeware' %}">Homeware</a>
            <a class="dropdown-item" href="{% url 'store:catagory' cat='electronics' %}">Electronics</a>
            <a class="dropdown-item" href="{% url 'store:catagory' cat='entertainment' %}">Entertainment</a>
            <a class="dropdown-item" href="{% url 'store:catagory' cat='clothing' %}">Clothing</a>
            <a class="dropdown-item" href="{% url 'store:catagory' cat='toys' %}">Toys</a>
            <a class="dropdown-item" href="{% url 'store:catagory' cat='health' %}">Health</a>
          </div>
        </li>
        <li class="nav-item" id="notification">
          <div id="message-button" class="btn">
            <i class="fa-solid fa-bell notification-icon"></i>
          </div>
          {% if messages %}
          <span id="notification-status-message" class="text-center">{{messages|length}}</span>
          {% else %}
          <span id="notification-status-none" class="text-center">0</span>
          {% endif %}
        </li>
        {% else %}
        <li class="nav-item">
          <a class="nav-link medium-txt" href="{% url 'account_signup' %}">Create Account/Sign-in</a>
        </li>
        {% endif %}
        <li class="text-center nav-item" id="shopping-basket">
          <a href="{% url 'basket:basket_view' %}"><i class="fa-solid fa-basket-shopping"></i></a>
          <div>
            {% if grand_total %}
            £{{ grand_total|floatformat:2 }}
            {% else %}
              £0.00
            {% endif %}
          </div>
        </li>
      </ul>
    </div>
  </nav>
  <header>
    <div class="carousel-container container-fluid d-none d-md-block">
      <div class="row">
        <div class="col-12 p-0">
          <div class="carousel slide" data-ride="carousel">
            <div class="carousel-item active">
              <img class="d-block center-block c-img"
                src="https://images.nightcafe.studio/jobs/hEPJLkRwmb7CPYnUWNlG/hEPJLkRwmb7CPYnUWNlG--1--h8vfz.jpg?tr=w-1600,c-at_max"
                alt="Electronics">
            </div>
            <div class="carousel-item">
              <img class="d-block center-block c-img"
                src="https://images.nightcafe.studio/jobs/w6s04lWS1JRYM0bq2kt8/w6s04lWS1JRYM0bq2kt8--1--ekox3.jpg?tr=w-1600,c-at_max"
                alt="Homeware">
            </div>
            <div class="carousel-item">
              <img class="d-block center-block c-img"
                src="https://images.nightcafe.studio/jobs/FBBANpyRVhd2nd1k3WOY/FBBANpyRVhd2nd1k3WOY--4--yv0l2.jpg?tr=w-1600,c-at_max"
                alt="Clothing">
            </div>
            <div class="carousel-item">
              <img class="d-block center-block c-img"
                src="https://images.nightcafe.studio/jobs/XWIEWHjsdRVn6fT7tc9k/XWIEWHjsdRVn6fT7tc9k--1--sraf8.jpg?tr=w-1600,c-at_max"
                alt="Entertainment">
            </div>
            <div class="carousel-item">
              <img class="d-block center-block c-img"
                src="https://images.nightcafe.studio/jobs/BavKLhZp3bnYQoqL4uSC/BavKLhZp3bnYQoqL4uSC--1--opv6y.jpg?tr=w-1600,c-at_max"
                alt="Toys">
            </div>
          </div>
        </div>
        <div class="search-container medium-txt">
          <form class="d-flex" method="GET" action="{% url 'store:search_results'%}">
            <input class="form-control me-2" type="search" name="searched" placeholder="Search"
              aria-label="search">
            <button class="btn search-button" type="submit">Search</button>
          </form>
        </div>
      </div>
    </div>
    <div class="container-fluid control-bar-bg d-none d-lg-block">
      <div class="row text-center navbar">
        <div><a href="{% url 'store:all_listings' %}" class="medium-txt">All</a></div>
        <div><a href="{% url 'store:catagory' cat='homeware' %}" class="medium-txt">Homeware</a></div>
        <div><a href="{% url 'store:catagory' cat='electronics' %}" class="medium-txt">Electronics</a></div>
        <div><a href="{% url 'store:catagory' cat='entertainment' %}" class="medium-txt">Entertainment</a></div>
        <div><a href="{% url 'store:catagory' cat='clothing' %}" class="medium-txt">Clothing</a></div>
        <div><a href="{% url 'store:catagory' cat='toys' %}" class="medium-txt">Toys</a></div>
        <div><a href="{% url 'store:catagory' cat='health' %}" class="medium-txt">Health</a></div>
      </div>
    </div>

  </header>

  {% if messages %}
  <div id="message-popup" class="container-fluid text-center">
    <span class="d-none" id="message-area">
      {% for message in messages %}
      <span> {{message}} </span>
      {% endfor %}
    </span>
  </div>
  {% endif %}

  {% block page_hearder %}
  {% endblock %}

  {% block postloadjs %}
  {% endblock %}

  <div class="container-fluid">
    {% block content %}
    {% endblock %}
  </div>

</body>

</html>